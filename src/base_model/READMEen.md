# Base Model (MFD-RL+Hongo) Execution Guide

## Overview
This project executes the MFD-RL+Hongo simulation. Simulations are performed using configuration files and data.

## Directory Structure
```
base_model/
    Hongo/              # Hongo-related input/output and source
    MFDRL-Hongo/
        code/           # Python code (main.py, mfdrlpy.py, hongopy.py, etc.)
        data/           # Input data (csv, geojson, shapefile, etc.)
        config/         # Configuration files (conf_*.json)
        run.sh          # Execution script
        requirements.txt
        DockerFile
docker-compose.yml
.env            # Settings for execution mode and paths
```

## Preparation
1. Edit conf.json (under config/) to adjust file paths and settings for your environment.
2. Create a .env file and set the required environment variables.

## How to Run
1. Two-step execution: Initialization → Simulation
   - Set `INITIALIZE=true` in .env → Data initialization
   - Set `INITIALIZE=false` in .env → Run simulation
2. MFD parameters (mfd_params3.csv) and RL parameters (EstimationResult.csv) are not generated by the initialization step, so please use estimates from other programs.
3. Run `docker-compose up` to start the container and execute the simulation.

## Example Folder Structure
```
Hongo/
    build/
    src/
MFDRL-Hongo/
    code/
        main.py
        mfdrlpy.py
        hongopy.py
        create_input_mfdrl.py
        create_input_hongo.py
        Utility.py
    data/
        500mesh/
            ehime500m.csv
        Hongo/
            input/
            output/
        MFD-RL/
            input/
                Activity_params.csv
                mfd_params3.csv
                Route_params.csv
            output/
        mobaku/
        output/
    config/
        conf_matsuyama.json
    MFD-RL/
        input/
        output/
```

## Notes
- For data and output persistence, bind directories and set paths as needed.
